---
title: "Tamburini AVID-seq"
author: "Ryan Sheridan"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    toc_depth: 3
    df_print: "paged"
    code_folding: "hide"
    self_contained: true
    highlight: "kate"
params:
  genome: "GRCm"
  template_dir: "../src"
  rds_dir: "../sobjs/so"
  xlsx_dir: "R_gene_lists"
  cell_types:
    - "DC"
    - "LEC"
    - "FRC"
  time_points:
    - "d2"
    - "d14"
---

---

<br>

`r knitr::knit_child(file.path(params$template_dir, "funs.Rmd"))`

```{r "Run markers chunks", echo = F}

rds_df <- expand.grid(params$time_point, params$cell_types)
rds_df <- rds_df[file.exists(str_c(params$rds_dir, "/", rds_df$Var1, "_", rds_df$Var2, "_so.rds")), ]

rds_types <- rds_df$Var2

rds_names <- rds_df %>%
  unite(rds_names, Var1, Var2) %>%
  pull(rds_names)

mark_chunks <- map2(rds_types, rds_names, ~ {
  knit_expand(str_c(params$template_dir, "/markers_template.Rmd"))
})

```

`r knit_child(text = mark_chunks)`

